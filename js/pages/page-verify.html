<!doctype html>
<html lang="en">

<head>
    <title>:: CCS :: Verify Laptop ID</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="description" content="CCS Bootstrap 4.1.1 Admin Template">
    <meta name="author" content="ThemeMakker, design by: ThemeMakker.com">

    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <!-- VENDOR CSS -->
    <link rel="stylesheet" href="../assets/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../assets/vendor/animate-css/animate.min.css">
    <link rel="stylesheet" href="../assets/vendor/font-awesome/css/font-awesome.min.css">

    <!-- MAIN CSS -->
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/color_skins.css">
</head>

<body class="theme-blue">
<!-- WRAPPER -->
<div id="wrapper">
    <div class="vertical-align-wrap">
        <div class="vertical-align-middle auth-main">
            <div class="auth-box">
                <div class="mobile-logo"><a href="index.html"><img src="../assets/images/thumbnail.png" alt="CCS"></a></div>
                <div class="auth-left">
                    <div class="left-top">
                        <a href="index.html">
                            <img src="../assets/images/thumbnail.png" alt="CCS">
                            <span>CCS</span>
                        </a>
                    </div>
                    <div class="left-slider">
                        <img src="../assets/images/login/2.jpg" class="img-fluid" alt="">
                    </div>
                </div>
                <div class="auth-right">
                    <div class="right-top">
                        <ul class="list-unstyled clearfix d-flex">
                            <li><a href="index.html"><i class="fa fa-home"></i></a></li>
                            <li><a href="javascript:void(0);">Help</a></li>
                            <li><a href="javascript:void(0);">Contact</a></li>
                        </ul>
                    </div>
                    <div class="card">
                        <div class="header">
                            <p class="lead">{{laptopId}}</p>
                            <span>Make sure this is YOUR Laptop ID</span>
                        </div>
                        <div class="body">
                            <p>If not please notify and update your latest laptop number to your SUPERVISOR<br>Please try after some time.</p>
                            <a href="index.html" class="btn btn-primary"><i class="fa fa-thumbs-o-up"></i> <span>Continue</span></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- END WRAPPER -->
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="//unpkg.com/vue-plain-pagination@0.2.1"></script>
<script src="https://unpkg.com/@directus/sdk-js@4.0.0/dist/directus-sdk.umd.min.js"></script>
<script src="assets/js/util.js"></script>
<script>
    const client = new DirectusSDK({
        url: "http://ccs.cyrix.my/cms/public",
        project: "_",
        token: window.sessionStorage.getItem("token")
    });
    function getCurrentUser(){
        client.getMe().then((res1)=>{
            console.log(res1);
            client.getItems("operator",{
                fields: "*.*",
                limit: 1,
                filter:{
                    user_id:res1.data.id
                }
            }).then((res2) => {
                console.log(res2);
                if(res2.data[0]["laptop_id"]) {
                    app.laptopId = res2.data[0]["laptop_id"]
                }
                else {
                    setTimeout(()=>{
                        window.location.href = "http://ccs.cyrix.my/admin/web/page-403.html";
                    },5000)
                }
            });
        });
    }
    getCurrentUser();
    myRefreshToken(client);
    //console.log(client.getMe().then((res) => console.log(res)));
    //Vue.component('v-pagination', window['vue-plain-pagination']);
    let app = new Vue({
        el: '#wrapper',
        data: {
            laptopId:"Not Available"
        },
        methods: {

        }
    });

</script>
</body>
</html>

